# second-hello-spring
μ¤ν”„λ§ ν•µμ‹¬ μ›λ¦¬ - κΈ°λ³ΈνΈ (μΈν”„λ°)

# 2021
## 12μ›”
### 2021 - 12 - 12
#### [1. μ¤ν”„λ§μ„ ν•κΈ°μ „μ— λ‹¤ν•μ„±μ„ μ•μ•„λ³΄μ](https://github.com/Imaspear/WhatIsSpring/blob/main/2021/12μ›”/12μΌ/μ¤ν”„λ§μ„_ν•κΈ°_μ „μ—_λ‹¤ν•μ„±μ„_μ•μ•„λ³΄μ.md)

<br>

#### [2. μ¤ν”„λ§μ—μ„ μΆ‹μ€ κ°μ²΄ μ§€ν–¥ μ„¤κ³„μ 5κ°€μ§€ μ›μΉ™(SOLID)](https://github.com/Imaspear/WhatIsSpring/blob/main/2021/12μ›”/12μΌ/μ¤ν”„λ§μ—μ„_μΆ‹μ€_κ°μ²΄_μ§€ν–¥_μ„¤κ³„μ_5κ°€μ§€_μ›μΉ™(SOLID).md)

<br>

#### [3. μΆ‹μ€ κ°μ²΄ μ§€ν–¥ μ„¤κ³„μ— λ€ν• λ‚μ κ³ λ―Ό](https://github.com/Imaspear/WhatIsSpring/blob/main/2021/12μ›”/12μΌ/μΆ‹μ€_κ°μ²΄_μ§€ν–¥_μ„¤κ³„μ—_λ€ν•_λ‚μ_κ³ λ―Ό.md)

<br>
<br>

### 2021 - 12 - 13
#### ν…μ¤νΈ
> ν…μ¤νΈλ” μ„±κ³µκ³Ό μ‹¤ν¨ κ·Έλ¦¬κ³  μμ™ΈκΉμ§€ ν…μ¤νΈν•΄λ³΄μ.

> BeforeEach -> test code -> AfterEach λ©”μ„λ“μ μ‚¬μ΄ν΄ 

#### λ‚λ” SRP, DIP, OCP μ›μΉ™μ— μ–΄κΈ‹λ‚λ” μ„¤κ³„λ¥Ό ν•κ³  μλ‹¤.
> μΈν„°νμ΄μ¤λ¥Ό μ΄μ©ν•΄ μ—­ν• κ³Ό κΈ°λ¥μ„ λ¶„λ¦¬ν–λ”λ°... 
 
μ΄μ „κΉμ§€ μ°λ¦¬λ” ν΄λΌμ΄μ–ΈνΈ ν΄λμ¤κ°€ μƒμ„±λ  λ• λ§λ‹¤ κµ¬ν„ κ°μ²΄λ¥Ό μ°Έμ΅°ν•΄ μƒμ„±μλ¥Ό μƒμ„±ν•΄μ£Όλ©° λ‹¤μ–‘ν• λ©”μ„λ“λ¥Ό μ‹¤ν–‰ν–λ‹¤.

μΈν„°νμ΄μ¤λ¥Ό ν†µν•΄ μ°λ¦¬λ” μΈν„°νμ΄μ¤μ— μλ” λ©”μ„λ“λ¥Ό μ°Έμ΅°ν•΄ μ‚¬μ©ν•  μ μμ–΄μ„ μ‹¤μ  λ™μ‘μ— ν•„μ”ν• κµ¬ν„ κ°μ²΄κ°€ μ•„λ¬΄λ¦¬ λ³€ν•΄λ„ μ°λ¦¬λ”
ν΄λΌμ΄μ–ΈνΈμ μ½”λ“λ¥Ό ν¬κ² λ³€κ²½ μ‹μΌμ¤„ ν•„μ”κ°€ μ—†λ” μƒν™©μ΄λ‹¤. ν•μ§€λ§ λ™μ‘μ— ν•„μ”ν• κµ¬ν„ κ°μ²΄λ¥Ό λ°”κΏ”μ•Ό ν•λ” μƒν™©μ΄ μ¨λ‹¤λ©΄ μ°λ¦¬λ”
ν•„μ λ¶κ°€κ²°ν•κ² ν΄λΌμ΄μ–ΈνΈ μ½”λ“λ¥Ό λ³€κ²½ν•΄μ¤μ•Ό ν•λ‹¤. 

 ```java
public class MemberServiceImpl implements MemberService{
    private final MemberRepository memberRepository = new MemoryRepository();
//    λ‹¤μ–‘ν• λ©”μ„λ“...
}
```

μ°λ¦¬κ°€ μƒλ‹Ήν• ν΄λΌμ΄μ–ΈνΈ μ½”λ“λ“¤μ„ κ°€μ§€κ³  μκ³ , λ°”κΏ”μ•Ό ν•λ” κµ¬ν„ κ°μ²΄λ¥Ό μ°Έμ΅°ν•λ” ν΄λΌμ΄μ–ΈνΈ μ½”λ“λ“¤μ΄ λ§λ‹¤λ©΄, 
ν΄λΌμ΄μ–ΈνΈ μ½”λ“λ“¤μ„ λ‹¤ μμ •ν•΄μ•Όν•λ” μƒν™©μ΄ μ¨λ‹¤. π–π– 

λ§μ§€λ§‰μΌλ΅ μ°λ¦¬κ°€ μ¶”κµ¬ν•λ” κ°μ²΄ μ§€ν–¥ ν”„λ΅κ·Έλλ°μ—μ„ μ„Έκ°€μ§€μ μ›μΉ™μ„ μ–΄κΈ°κ³  μλ‹¤.
μ°λ¦¬κ°€ μ–΄κΈ΄ μ„Έκ°€μ§€ μ›μΉ™μ€ SRP, DIP κ·Έλ¦¬κ³  OCPμ΄λ‹¤.
1. SRP μ›μΉ™μ— μ–΄κΈ‹λ‚¨
   > ν•΄λ‹Ή ν΄λΌμ΄μ–ΈνΈ μ½”λ“λ” κµ¬ν„ κ°μ²΄λ¥Ό μ°Έμ΅°ν•΄μ•Ό ν•κ³ , μ‹¤ν–‰ν•λ” μ—­ν• κΉμ§€ λ‘ κ°μ μ±…μ„μ„ λ§΅μ€ ν΄λΌμ΄μ–ΈνΈ μ½”λ“κ°€ λλ‹¤.
2. DIP μ›μΉ™μ— μ–΄κΈ‹λ‚¨
   > μΈν„°νμ΄μ¤λ¥Ό μμ΅΄ν•κ³  μμ§€λ§ μΈν„°νμ΄μ¤λ΅ κµ¬ν„ν• κ°μ²΄κΉμ§€λ„ μμ΅΄ν•κ³  μλ” μƒν™©μ΄ λλ‹¤.
3. OCP μ›μΉ™μ— μ–΄κΈ‹λ‚¨ 
   > λ³€κ²½μ—λ” λ‹«ν€ μμ–΄μ•Ό ν•λ” OCP μ›μΉ™μ— μ–΄κΈ‹λ‚λ‹¤. 


ν΄λΌμ΄μ–ΈνΈ μ½”λ“λ¥Ό μ–΄λ–»κ² λ°”κΏ”μ•Ό ν•λ”κ°€?
>μ¤ν”„λ§μ μ¥μ μΈ μμ΅΄κ΄€κ³„ μ£Όμ…μ„ ν•΄λ³΄μ!


#### AppConfig ν΄λμ¤μ μ¶ν„
> AppConfig ν΄λμ¤κ°€ μ°λ¦¬μ—κ² μ–΄λ–¤ νΈλ¦¬ν•¨μ„ μ κ³µν•΄ μ¤„κΉ?

AppConfig ν΄λμ¤λ” μ• ν”λ¦¬μΌ€μ΄μ…μ μ‹¤μ  λ™μ‘μ— ν•„μ”ν• κµ¬ν„ κ°μ²΄λ¥Ό μƒμ„±ν•κ³ , μƒμ„±ν• κ°μ²΄ μΈμ¤ν„΄μ¤μ μ°Έμ΅°(λ νΌλ°μ¤)λ¥Ό μƒμ„±μλ¥Ό ν†µν•΄μ„ μ£Όμ…(μ—°κ²°) ν•΄μ¤€λ‹¤.
μƒμ„±μ μ£Όμ…μ„ ν•κΈ° μ„ν•΄μ„λ” κµ¬ν„ κ°μ²΄μ—μ„ μƒμ„±μλ¥Ό μƒμ„±ν•΄ μ£Όμ…ν•λ ¤λ” μΈμ¤ν„΄μ¤μ λ νΌλ°μ¤λ¥Ό μΈμλ΅ λ„£μ–΄μ£Όλ©΄ λλ‹¤.



<br>

μ•„λμ μƒμ„±μ μ£Όμ…μ„ ν†µν•΄ ν•΄λ‹Ή ServiceImpl ν΄λμ¤λ” MemoryMemberRepositoryλ¥Ό μμ΅΄ν•μ§€ μ•κ²λμ–΄
DIPμ™€ OCPμ— μ„λ°°λμ§€ μ•κ² λλ‹¤. μ΄λ¬ν• μƒμ„±μ μ£Όμ…μ€ μƒμ„±μλ¥Ό ν†µν•΄μ„ μ–΄λ–¤ κµ¬ν„ κ°μ²΄λ¥Ό μ£Όμ…ν• μ§€λ” μ¤μ§ μ™Έλ¶€
AppConfig ν΄λμ¤μ—μ„ κ²°μ •ν•λ―€λ΅ μμ΅΄κ΄€κ³„μ— λ€ν• κ³ λ―Όμ€ AppConfig ν΄λμ¤μ— λ§΅κΈ°κ³  μ„¤κ³„μ—λ§ μ§‘μ¤‘ν•  μ μλ‹¤.

AppConfig.java
```java
public class AppConfig {
    public MemberService memberService(){
        return new MemberServiceImpl(new MemoryRepository());
    }
    public OrderService orderService(){
        return new OrderServiceImpl(new MemoryRepository(), new RateDiscountPolicy());
    }
}
```

<br>

κ·Έλ ‡κ² λ³€κ²½λ MemberServiceImpl ν΄λμ¤

MemberServiceImpl.java
```java
public class MemberServiceImpl implements MemberService{
    private final MemberRepository memberRepository;

    public MemberServiceImpl(MemberRepository memberRepository) {
        this.memberRepository = memberRepository;
    }
//  λ‹¤μ–‘ν• λ©”μ„λ“λ“¤...
}
```

AppConfig ν΄λμ¤μ λ“±μ¥μΌλ΅ μΈν•΄ DIPμ„ μ§€ν‚¬ μ μκ³ ,
κ°μ²΄λ¥Ό μƒμ„±ν•κ³  μ—°κ²°ν•λ” μ—­ν• (AppConfig)κ³Ό μ‹¤ν–‰ν•λ” μ—­ν• μ΄ λ©±ν™•ν•κ² λ¶„λ¦¬λλ” κ΄€μ‹¬μ‚¬μ λ¶„λ¦¬λ¥Ό μ μ©ν•  μ μλ‹¤.


#### DI - μμ΅΄κ΄€κ³„ μ£Όμ…
> DIλΌκ³  λ“¤μ–΄ λ΄¤λ‚?

AppConfig ν΄λμ¤λ” κµ¬ν„ κ°μ²΄μ—μ„ μƒμ„±μλ¥Ό μƒμ„±ν•΄ μ£Όμ…ν•ν•΄μ£Όλ”λ°, μ£Όμ… λ°›λ” κµ¬ν„ κ°μ²΄ μ…μ¥μ—μ„ μƒκ°ν•λ©΄
λ§μΉ μ™Έλ¶€μ—μ„ μ£Όμ…ν•΄μ£Όλ” κ²ƒμ„ μμ΅΄κ΄€κ³„ μ£Όμ…(DI)μ΄λΌ ν•λ‹¤.

μμ΅΄κ΄€κ³„λ” λ‘ κ°€μ§€λ΅ λ¶„λ¦¬ν•΄μ„ μƒκ°ν•΄μ•Ό ν•λ‹¤.
1. μ •μ μΈ ν΄λμ¤ μμ΅΄ κ΄€κ³„ 
   1. μ •μ μΈ ν΄λμ¤ μμ΅΄κ΄€κ³„λ” ν΄λμ¤κ°€ μ‚¬μ©ν•λ” import μ½”λ“λ§ λ³΄κ³  μμ΅΄κ΄€κ³„λ¥Ό μ‰½κ² νλ‹¨ν•  μ μλ‹¤.
2. μ‹¤ν–‰ μ‹μ μ— κ²°μ •λλ” λ™μ μΈ κ°μ²΄μ μμ΅΄ κ΄€κ³„ 
   1. λ™μ μΈ κ°μ²΄ μΈμ¤ν„΄μ¤μ™€μ μμ΅΄ κ΄€κ³„λ” μ• ν”λ¦¬μΌ€μ΄μ… μ‹¤ν–‰ μ‹μ μ— μ‹¤μ  μƒμ„±λ κ°μ²΄ μΈμ¤ν„΄μ¤μ μ°Έμ΅°κ°€ μ—°κ²°λ μμ΅΄κ΄€κ³„μ΄λ‹¤.

μ΄λ ‡κ² μμ΅΄κ΄€κ³„ μ£Όμ…μ„ μ‚¬μ©ν•λ©΄ μ •μ μΈ ν΄λμ¤ μμ΅΄κ΄€κ³„λ¥Ό λ³€κ²½ν•μ§€ μ•κ³ , λ™μ μΈ κ°μ²΄ μΈμ¤ν„΄μ¤ μμ΅΄κ΄€κ³„λ¥Ό μ‰½κ² λ³€κ²½ν•  μ μλ‹¤.

#### AppConfig ν΄λμ¤κ°€ λ¦¬ν©ν† λ§μ΄ λλ‹¤κ³ ?!
> μ¤‘λ³µμ„ μ—†μ• κ³ , μ—­ν• λ• λ”°λ¥Έ κµ¬ν„ λ¶„λ…ν•κ² ν•κΈ°

μ•„λμ™€ κ°™μ΄ κµ¬ν„μ²΄λ¥Ό λ¶„λ¦¬ν•΄ μ¤‘λ³µλλ” λ¶€λ¶„μ„ μ κ±°ν•κ³ , κµ¬ν„μ²΄λ¥Ό λ³€κ²½ν•  λ• ν• λ¶€λ¶„λ§ λ³€κ²½ν•  μ μλ„λ΅ μ„¤μ •ν•  μ μλ‹¤.

μ•„λμ™€ κ°™μ΄ λ¦¬ν©ν† λ§μ„ ν•κ² λλ©΄μ„ μ—­ν• κ³Ό κµ¬ν„ ν΄λμ¤κ°€ ν•λμ— λ“¤μ–΄μ™€ μ• ν”λ¦¬μΌ€μ΄μ…μ μ „μ²΄ κµ¬μ„±μ΄ μ–΄λ–»κ² λμ–΄ μλ”μ§€λ¥Ό λΉ λ¥΄κ² νμ•…ν•  μ μλ‹¤.
μ €μƒμ†λ” λ©”λ¨λ¦¬ μ €μ¥μ†λ¥Ό μ±„νƒν–λ‹¤λ” κ²ƒμ„ μ• μ μλ‹¤.

```java
public class AppConfig {
    private MemberRepository memoryRepository() {
        return new MemoryRepository();
    }

//  ν• μΈ μ •μ±…μ€ μ •λ¥  ν• μΈμΌλ΅ κ°„λ‹¤λ” κ²ƒμ„  μ• μ μλ‹¤.
    private DiscountPolicy discountPolicy() {
        return new RateDiscountPolicy();
    }

    public MemberService memberService(){
        return new MemberServiceImpl(memoryRepository());
    }

    public OrderService orderService(){
        return new OrderServiceImpl(memoryRepository(), discountPolicy());
    }
}
```




#### AppConfigλ¥Ό μƒμ„±ν•λ©΄μ„ μ§€μΌμ§„ μ›μΉ™λ“¤
- SRP
    
    μ΄κΈ° OrderServiceImpl, MemberServiceImpl ν΄λΌμ΄μ–ΈνΈ κ°μ²΄λ“¤μ€ μ§μ ‘ κµ¬ν„ κ°μ²΄λ¥Ό μƒμ„±ν•κ³ , μ‹¤ν–‰ν•λ” λ‹¤μ–‘ν• μ±…μ„μ„ κ°€μ§€κ³  μμ—λ‹¤.
    > AppConfigλ¥Ό μƒμ„±ν•λ©΄μ„ κµ¬ν„ κ°μ²΄λ¥Ό μƒμ„±ν•κ³  μ—°κ²°ν•λ” μ±…μ„μ„ AppConfigλ΅ μ „κ°€μ‹ν‚΄μΌλ΅ κµ¬ν„ κ°μ²΄μ— μ‹¤ν–‰μ΄λΌλ” ν•λ‚μ μ±…μ„λ§μ„ λ‚¨κ²¨ SRP μ›μΉ™μ„ μ§€μΌ°λ‹¤.
- DIP

    μƒλ΅μ΄ ν• μΈ μ •μ±…μ„ κ°λ°ν•κ³  μ μ©μ‹ν‚¤λ©΄ ν΄λΌμ΄μ–ΈνΈ μ½”λ“λ“¤λ„ ν•¨κ» λ³€κ²½ν•΄μ•Ό ν•΄μ„ λ²κ±°λ΅μ› λ‹¤. κ° μ„λΉ„μ¤λ“¤μ€ DIPλ¥Ό μ§€ν‚¤λ©° μΈν„°νμ΄μ¤μ— μμ΅΄ν•λ” λ“― λ³΄μ€μ§€λ§
    μΈν„°νμ΄μ¤μ™€ ν•¨κ» μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν• ν΄λμ¤λ„ ν•¨κ» μμ΅΄ν•λ” μƒν™©μ΄ λ°μƒν–λ‹¤.
    ```java
    public class MemberServiceImpl implements MemberService{
        private final MemberRepository memberRepository = new MemoryRepository();
    }
    ```
    > AppConfigμ— κ°μ²΄ μΈμ¤ν„΄μ¤λ¥Ό ν΄λΌμ΄μ–ΈνΈκ°€ μ§μ ‘ν•λ” λ€μ‹  ν΄λΌμ΄μ–ΈνΈμ— μμ΅΄ κ΄€κ³„λ¥Ό μ£Όμ…ν•λ©΄μ„ DIP λ¬Έμ λ¥Ό ν•΄κ²°ν•  μ μλ‹¤. 

    ```java 
    public class MemberServiceImpl implements MemberService{
       private final MemberRepository memberRepository;
        
       public MemberServiceImpl(MemberRepository memberRepository) {
            this.memberRepository = memberRepository;
       }
    }
    ```
- OCP
    > AppConfigλ¥Ό μ‚¬μ©ν•΄ ν΄λΌμ΄μ–ΈνΈλ¥Ό λ³€κ²½ν•μ§€ μ•κ³  μΈμ¤ν„΄μ¤λ¥Ό AppConfigμ—μ„ μμ΅΄ κ΄€κ³„λ¥Ό μ£Όμ…ν•λ©΄μ„ OCP μ›μΉ™μ„ μ§€ν‚¬ μ μλ‹¤.
    μ΄λ ‡κ² κ°μ²΄ μ§€ν–¥ μ„¤κ³„λ¥Ό ν•λ©΄ μƒλ΅­κ² ν™•μ¥ν•΄λ„ μ‚¬μ© μμ—­μ λ³€κ²½μ€ λ‹«ν€ μκ² μ„¤κ³„ν•  μ μλ‹¤.

**AppConfig ν΄λμ¤λ” IoC μ»¨ν…μ΄λ„μ΄λ©°, DI μ»¨ν…μ΄λ„λ‹¤.**
#### μ „μ²΄μ μΈ ν”„λ΅μ νΈμ Diagram
<img src="java.png" alt=""/>


#### μ μ–΄μ μ—­μ „(Inversion of Control)
κΈ°μ΅΄ ν”„λ΅κ·Έλ¨μ€ ν΄λΌμ΄μ–ΈνΈ κµ¬ν„ κ°μ²΄κ°€ μ¤μ¤λ΅ ν•„μ”ν• μ„λ²„ κµ¬ν„ κ°μ²΄λ¥Ό μƒμ„±ν•κ³ , νΈμ¶ν•κ³  μ‹¤ν–‰ν–λ‹¤.
ν•λ§λ””λ΅ ν”„λ΅κ·Έλ¨μ νλ¦„μ„ κµ¬ν„ κ°μ²΄ μ¤μ¤λ΅κ°€ μ΅°μΆ…ν–λ‹¤.

λ°λ©΄μ— AppConfig ν΄λμ¤κ°€ λ“±μ¥ν• μ΄ν›„μ— κµ¬ν„ κ°μ²΄λ” μμ‹ μ λ΅μ§μ„ μ‹¤ν–‰ν•λ” μ—­ν• λ§ λ‹΄λ‹Ήν•λ©΄μ„ μ μ–΄ νλ¦„μ„
μ™Έλ¶€μ—μ„ κ΄€λ¦¬ν•κ² λ κ²ƒμ„ μ μ–΄μ μ—­μ „(IoC)μ΄λΌκ³  ν•λ‹¤. 

#### ν”„λ μ„μ›ν¬ vs λΌμ΄λΈλ¬λ¦¬
- ν”„λ μ„μ›ν¬λ” λ‚΄κ°€ μ‘μ„±ν• μ½”λ“λ¥Ό μ μ–΄ν•λ‹¤. λ€μ‹  μ‹¤ν–‰ν•λ©΄ κ·Έκ²ƒμ€ ν”„λ μ„μ›ν¬κ°€ λ§λ‹¤.(JUnit)
- λ‚΄κ°€ μ‘μ„±ν• μ½”λ“κ°€ μ§μ ‘ μ μ–΄μ νλ¦„μ„ λ‹΄λ‹Ήν•λ‹¤λ©΄ κ·Έκ²ƒμ€ ν”„λ μ„μ›ν¬κ°€ μ•„λ‹λΌ λΌμ΄λΈλ¬λ¦¬μ΄λ‹¤.

